tosca_definitions_version: ${alien4cloud.dsl.version}

template_name: janus-slurm-types
template_author: Janus
template_version: ${janus.types.version}

description: "Defines resources for the Janus plugin, slurm configuration."

imports:
  - tosca-normative-types:${tosca.normative.types.version}

node_types:
  janus.nodes.slurm.Compute:
    derived_from: tosca.nodes.Compute
    properties:
      gres:
        type: string
        required: false
      partition:
        type: string
        required: false
        description: Slurm partition where the nodes will be deployed
      user:
        type: string
        description: >
          The user name used to connect to the Compute and provision it.
        required: true
    attributes:
      cuda_visible_devices:
        type: string
        description: Coma separated list of visibles GPU devices for the compute.
  janus.nodes.slurm.Cntk:
    derived_from: tosca.nodes.Compute
    properties:
      partition:
        type: string
        required: true
      runAsUser:
        type: string
        required: true
      modelPath:
        type: string
        required: true
      modelFile:
        type: string
        required: true
      imgPath:
        type: string
        required: true
      nbNode:
        type: string
        required: false
      nodesName:
        type: string
        required: false
      nbMpiProcess:
        type: string
        required: false
    attributes:
      final_error:
        type: string
